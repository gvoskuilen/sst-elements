#define SIDE 12
#define SHIFT 16

typedef unsigned int uint32_t;

uint32_t firstM[SIDE][SIDE] =  {
    { 31, 30784, 17379, 25771, 18135, 5595, 6839, 18867, 18067, 5246, 11494, 14553},
    { 2573, 10213, 5502, 31767, 9231, 17631, 26690, 29412, 12641, 29072, 4482, 22644},
    { 17803, 9137, 8069, 6212, 27578, 27282, 8923, 16512, 11697, 24109, 18841, 19233},
    { 2656, 5207, 24265, 21831, 26919, 31186, 26030, 18206, 30583, 22379, 5730, 23166},
    { 22476, 4129, 2896, 10719, 29738, 22803, 24160, 16691, 7006, 28064, 21345, 29796},
    { 6285, 12089, 10019, 11841, 8198, 3271, 16096, 14916, 15340, 7338, 19115, 13302},
    { 31015, 14543, 378, 2482, 16442, 8772, 19188, 15105, 15877, 29020, 16061, 15046},
    { 17723, 4462, 11054, 24275, 4130, 10742, 32488, 16390, 4995, 19328, 25082, 31629},
    { 27801, 31744, 596, 1233, 24400, 13726, 23139, 3387, 23670, 30675, 4087, 30128},
    { 16010, 7571, 32172, 32397, 24606, 4080, 17866, 16500, 29676, 12869, 16725, 27364},
    { 13926, 16594, 29964, 29207, 18024, 2398, 4007, 8481, 31024, 8100, 6463, 20627},
    { 31870, 9955, 31800, 3789, 31194, 4482, 18169, 31541, 28114, 19475, 611, 25688}};
uint32_t secondM[SIDE][SIDE] =  {
    { 5870, 13564, 30539, 16395, 31694, 29104, 8269, 5017, 31027, 7261, 15500, 14538},
    { 26615, 14156, 8075, 24587, 27464, 12216, 1261, 30692, 27973, 21717, 30813, 26836},
    { 22236, 24936, 26658, 15741, 13491, 14726, 1845, 7898, 24875, 5247, 2330, 8175},
    { 13092, 4156, 5253, 24089, 13760, 22282, 14216, 7394, 9646, 22203, 4347, 1826},
    { 16574, 3065, 18148, 30615, 10274, 2149, 10258, 1310, 18373, 18706, 5519, 1394},
    { 25373, 31394, 10086, 16679, 1879, 6659, 26397, 22617, 4802, 190, 16884, 7295},
    { 9119, 15811, 2860, 7035, 18682, 13110, 3414, 25492, 19697, 32761, 29682, 15354},
    { 15351, 30629, 31143, 30693, 20265, 91, 20739, 19528, 15582, 26128, 29024, 7620},
    { 18352, 28053, 27094, 14345, 12170, 12878, 19198, 9026, 30326, 26790, 24869, 786},
    { 29617, 11415, 18790, 617, 4587, 29230, 24443, 15476, 3964, 22661, 28209, 9932},
    { 2826, 7141, 551, 29273, 26577, 3542, 15145, 12452, 23236, 28824, 30509, 1760},
    { 14330, 8724, 27042, 17958, 3716, 30680, 13612, 23107, 12841, 30736, 27076, 31839}};
uint32_t goldenM[SIDE][SIDE] =  {
    { 46780, 40735, 43164, 57795, 41899, 34300, 31022, 41038, 51183, 57540, 51707, 28693},
    { 54177, 49886, 50595, 54160, 39466, 48850, 47096, 52083, 44869, 4901, 1362, 33834},
    { 51119, 47170, 53116, 57093, 40749, 42092, 45759, 43338, 49963, 57169, 61443, 30148},
    { 169, 63975, 64207, 64115, 42092, 51454, 53187, 53633, 59963, 7492, 3481, 33782},
    { 52514, 47448, 57166, 61409, 46421, 52190, 49342, 50201, 54663, 5401, 6233, 37494},
    { 31655, 32977, 34102, 41852, 35102, 28710, 26446, 32851, 41529, 49312, 47114, 22239},
    { 44613, 42125, 51743, 48310, 47008, 46677, 38939, 42227, 53755, 60104, 48, 32858},
    { 43693, 43662, 48122, 54657, 47343, 52952, 40788, 49997, 52240, 5590, 2803, 37643},
    { 58583, 47728, 59742, 53973, 48899, 58302, 41604, 54343, 62885, 4660, 10173, 46815},
    { 56880, 54781, 1993, 4709, 53255, 56868, 44787, 46021, 4547, 11613, 65053, 34698},
    { 49155, 44782, 56342, 56480, 42767, 47303, 33822, 35703, 58976, 57871, 48594, 28805},
    { 60301, 62729, 16701, 1286, 55165, 55868, 44521, 47641, 7900, 6240, 3991, 40089}};


uint32_t resultM[SIDE][SIDE];

int main() {
  int i,j,k;
  int errors = 0;
  uint32_t sum = 0;

  // do mat mat
  for ( i = 0 ; i < SIDE ; i++ ) {
    for ( j = 0 ; j < SIDE ; j++ ) {
      for (k = 0 ; k < SIDE ; k++ ) {
	sum = sum + firstM[i][k]*secondM[k][j];
      }
      
      resultM[i][j] = (sum>>SHIFT);
      sum = 0;
    }
  }
  
  // compare
  for ( i = 0 ; i < SIDE ; i++ ) {
    for ( j = 0 ; j < SIDE ; j++ ) {
      if (resultM[i][j] != goldenM[i][j]) {
	errors++;
	asm volatile ("move $a0, %0\n"   /* Move 'b' into $a0 */
		      "li $v0, 1\n"      /* Set for 'PRINT_INT' syscall */
		      "syscall" : : "r" (resultM[i][j]));
	asm volatile ("move $a0, %0\n"   /* Move 'b' into $a0 */
		      "li $v0, 1\n"      /* Set for 'PRINT_INT' syscall */
		      "syscall" : : "r" (goldenM[i][j]));
      }
    }
  }

  asm volatile ("move $a0, %0\n"   /* Move 'b' into $a0 */
		"li $v0, 1\n"      /* Set for 'PRINT_INT' syscall */
		"syscall" : : "r" (errors));

  return 0;
}
